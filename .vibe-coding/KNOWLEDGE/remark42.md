# Remark42: 2024년 11월 ~ 2025년 12월 주요 아키텍처 변화 및 실무 가이드

Remark42는 요청 기간(2024-11-13 ~ 2025-12-03) 동안 **새 버전이 릴리스되지 않았습니다.** 따라서 이 기간에 해당하는 API `deprecated`나 사용법 변경은 없습니다.

실질적으로 현재 최신 버전인 **v1.14.0(2024-10-27)**의 변경 사항이 코드 및 설정에 영향을 미치는 유일한 대상이 됩니다.

---

## 1. v1.14.0의 핵심 변경 사항: 보안 및 인증

| 항목                    | 유형               | 내용                                                                                                 | 코드/설정 영향                                                                                                                                                                                            |
| :---------------------- | :----------------- | :--------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Twitter OAuth**       | **Deprecated**     | Twitter OAuth 인증 지원이 **비권장(deprecated)**되고, 다음 메이저 버전에서 제거될 가능성이 높습니다. | **Action:** Twitter 로그인 의존도를 줄이고, GitHub, Google, Email 등 다른 OAuth 공급자로 마이그레이션해야 합니다.                                                                                         |
| **CSP/X-Frame-Options** | **보안 헤더 강화** | 서버 응답에 `Content-Security-Policy` 및 `Permissions-Policy` 헤더가 자체적으로 추가되었습니다.      | **Action:** `ALLOWED_HOSTS` 환경변수를 사용하여, 댓글을 임베드하는 모든 도메인(`iframe`의 `frame-ancestors`)을 명시적으로 화이트리스트에 추가해야 합니다. 이 설정이 누락되면 임베딩이 차단될 수 있습니다. |
| **RTL 지원**            | **새 UI 기능**     | 아랍어, 히브리어 등 **오른쪽→왼쪽(RTL)** 언어에 대한 UI 지원이 추가되었습니다.                       | **Action:** RTL 언어를 지원하는 사이트는 `lang` 속성 및 `dir` 설정을 통해 댓글 UI의 정렬이 자연스럽게 표시되도록 확인해야 합니다.                                                                         |

---

## 2. 실전 업그레이드 체크리스트 (v1.14.0 기준)

### 2-1. 인증 마이그레이션

- **Twitter 환경변수 정리:** `AUTH_TWITTER_CID`, `AUTH_TWITTER_CSEC` 등의 환경변수를 더 이상 사용하지 않고, 향후 삭제될 것을 전제로 인프라 코드(Docker Compose, Helm Values)에서 제거할 계획을 수립하십시오.

### 2-2. 임베딩 환경 안정성

- **`ALLOWED_HOSTS` 명시:** 하나의 Remark42 인스턴스를 여러 도메인(예: `blog.com`, `news.com`)에서 공유하는 경우, 모든 도메인을 `ALLOWED_HOSTS` 환경변수에 쉼표(,)로 구분하여 반드시 포함해야 합니다.
- **CSP 충돌 방지:** 이미 Nginx나 Cloudflare 같은 프록시/CDN 레벨에서 CSP 헤더를 주입하고 있다면, Remark42가 자체적으로 쏘는 CSP와 충돌하지 않도록 **웹 서버 쪽 CSP를 조정**하거나, Remark42의 정책을 기준으로 통합하는 것이 좋습니다.

### 2-3. UI 및 성능

- **Proxy-less Image:** 이미지 관련 CSP 정책이 조정되어, Proxy 없이도 이미지 로딩이 잘 되도록 개선되었습니다. 이전에 이 문제를 우회하기 위해 Nginx에서 별도의 이미지 프록시 설정을 해두었다면, 해당 설정을 제거하고 단순화할 수 있습니다.

**결론:** Remark42는 현재 API가 안정적이지만, **Twitter OAuth의 퇴출** 및 **CSP의 내부화**를 통해 보안 설정을 강화하고 있습니다. `ALLOWED_HOSTS` 설정과 인증 공급자 전환을 최우선으로 점검하십시오.
