# Turso Core 0.1.4 - 0.3.2 아키텍처 리포트: SQLite 확장과 안정성 강화

2024년 말부터 2025년 말까지 Turso의 핵심 엔진은 **'SQLite와의 호환성 심화'**와 **'분산 환경을 위한 독자 기능(MVCC, DBSP)의 안정화'**라는 두 가지 목표를 달성했습니다. 특히 v0.2.0을 기점으로 실험적인 기능들이 실무 레벨로 격상되었으며, v0.3.0에서는 서브쿼리와 외래키 등 RDBMS의 필수 기능들이 네이티브 수준으로 통합되었습니다.

본 리포트는 해당 기간의 변경 사항을 분석하여, 실무에서 즉시 적용 가능한 아키텍처 전략과 마이그레이션 포인트를 제시합니다.

---

## 1. Executive Summary: 버전별 핵심 아키텍처 변화

| 버전       | 릴리즈 시기 | 핵심 아키텍처 변화 (Architecture Shift)                                                                           |
| :--------- | :---------- | :---------------------------------------------------------------------------------------------------------------- |
| **v0.1.4** | '25.08      | **Integration:** JS/Rust/C 네이티브 바인딩 강화 및 DBSP 기반의 Incremental View 도입. Sync/CDC 파이프라인 내재화. |
| **v0.2.0** | '25.10      | **Concurrency:** MVCC 모드의 프로덕션 레벨 지원. 윈도우 함수 및 JSON 트리 등 고급 분석 기능 추가.                 |
| **v0.2.1** | '25.10      | **Integrity:** UNIQUE 제약 조건의 엄격한 강제 및 WAL/MVCC 혼용 금지. 데이터 무결성 최우선 정책.                   |
| **v0.3.0** | '25.10      | **SQL Power:** 서브쿼리, DISTINCT 집계, 외래키(FK) 등 복잡한 쿼리 지원 강화. SQLite 호환성 극대화.                |

---

## 2. Critical Action Items: 마이그레이션 필수 점검

### 2-1. 데이터 무결성 및 제약 조건 (Data Integrity)

- **UNIQUE 인덱스 검증 (v0.2.1):** 기존에 느슨하게 처리되던 UNIQUE 제약 조건이 엄격하게 강제됩니다. 마이그레이션 전, 데이터베이스 내 중복 데이터를 스캔하고 정제하는 절차가 필수적입니다.
- **외래키(FK) 도입 검토 (v0.3.0):** 애플리케이션 레벨에서 관리하던 참조 무결성을 DB 레벨로 이관할 수 있습니다. 신규 스키마 설계 시 FK 제약 조건을 적극 활용하여 데이터 정합성을 확보하십시오.

### 2-2. 동시성 제어 및 운영 모드 (Concurrency & Ops)

- **MVCC 전환 (v0.2.0):** 다중 트랜잭션 처리가 빈번한 서비스라면 기존 WAL 모드에서 MVCC 모드로의 전환을 계획하십시오. 단, v0.2.1부터 두 모드의 혼용이 차단되므로, 설정 파일에서 명확한 모드 지정이 필요합니다.
- **Query Stability (v0.3.0):** 복잡한 쿼리(서브쿼리, 윈도우 함수) 사용 시 실행 계획이 변경될 수 있습니다. 주요 리포팅 쿼리에 대한 성능 회귀 테스트(Regression Test)를 수행하십시오.

### 2-3. 코드 및 파이프라인 (Code & Pipeline)

- **네이티브 바인딩 활용 (v0.1.4):** JS/Rust 등에서 비공식적인 연결 방식을 버리고, `async connect()`, `execute_batch()` 등 공식 API로 리팩토링하십시오.
- **Sync/CDC 내재화 (v0.1.4):** 직접 WAL 파일을 파싱하거나 폴링하던 동기화 로직을 `turso-sync`, `turso-cdc` 패키지로 대체하여 파이프라인의 안정성을 높이십시오.

---

## 3. Strategic Adoption: 도입해야 할 신규 패턴

### 3-1. 실시간 데이터 처리

DBSP 기반의 **Incremental View**를 도입하여, 실시간 대시보드나 리포팅 시스템의 부하를 획기적으로 줄이십시오. (v0.1.4)

### 3-2. 벡터 검색 활용

별도의 벡터 DB 없이 Turso 내장 벡터 함수(`vector_concat` 등)를 사용하여, RAG(Retrieval-Augmented Generation) 파이프라인을 단순화하십시오. (v0.1.4, v0.3.0)

---

## 4. Conclusion

Turso v0.1.4~0.3.2 구간은 "SQLite의 간편함 위에 엔터프라이즈급 기능을 쌓아올리는" 과정이었습니다. 기존 시스템의 안정성을 위해 최신 안정 버전(v0.3.2)으로 업그레이드하는 것을 기본으로 하되, **MVCC와 고급 SQL 기능**을 적극 활용하여 데이터 아키텍처를 고도화하십시오.
