# Outline: 2024년 11월 ~ 2025년 12월 주요 아키텍처 변화 및 마이그레이션 가이드

Outline은 2024년 11월부터 2025년 12월까지 **v1.0.0 메이저 릴리스**를 통해 **'환경 요구사항 상향'**과 **'OAuth Provider 기능 도입'**을 중심으로 아키텍처를 재정립했습니다. 특히 검색 성능 개선을 위한 `pg_trgm` 의존성 강제와 문서 렌더링 파이프라인의 구조 변경은 기존 온프레미스 설치 및 커스텀 통합 시스템에 직접적인 영향을 미쳤습니다.

---

## 1. Executive Summary: 핵심 아키텍처 변화 (v0.73.0 → v1.1.0)

| 버전        | 릴리즈 시기 | 핵심 아키텍처 변화 (Architectural Impact)                                            | 영향도    |
| :---------- | :---------- | :----------------------------------------------------------------------------------- | :-------- |
| **v0.74.0** | '24.12      | **Runtime Mandate:** 최소 Node.js 18 및 Postgres `uuid-ossp` 모듈 요구.              | 매우 높음 |
| **v0.83.0** | '25.04      | **Search Dependency:** Postgres에 `pg_trgm` 확장 사용 강제. Notion 임포터 재설계.    | 높음      |
| **v0.84.0** | '25.05      | **Auth Shift:** Outline이 **OAuth 2.0 Provider** 역할 수행. API 키 기반 연동 비권장. | 매우 높음 |
| **v0.87.0** | '25.09      | **Rendering Pipeline:** 문서 렌더링 파이프라인 및 테이블 상호작용 구조 개선.         | 중간      |
| **v1.1.0**  | '25.11      | **API Consistency:** Mentions의 **일반 링크 직렬화** 및 `groupMemberships` API 보강. | 중간      |

---

## 2. Critical Action Items: 인프라 및 통합 필수 점검

### 2-1. 런타임 및 DB 환경 요구사항 상향 (v0.74.0, v0.83.0)

- **Node.js 업그레이드:** v0.74.0 이상으로 업그레이드 시, 실행 환경을 **Node.js 18 이상(Node 20 LTS 권장)**으로 전환해야 합니다. 구버전 Node(16 등) 기반 온프레미스 설치는 실패합니다.
- **Postgres 확장 설치:** 업그레이드 전에 DBA에게 **`uuid-ossp`** 및 **`pg_trgm`** 확장을 설치할 권한을 부여하거나 직접 설치해야 합니다. 특히 `pg_trgm`은 검색 성능 최적화를 위해 v0.83.0에서 사용이 강제됩니다.

### 2-2. 인증 및 통합 보안 전환 (v0.84.0)

- **OAuth Provider 전환:** 새로운 통합 서비스를 구축할 때, **API 키**를 직접 사용하는 대신 **Outline을 OAuth Provider**로 등록하고 **토큰 기반**으로 권한을 획득하는 구조로 전환하십시오. 이는 권한 관리의 안전성과 세밀함을 높입니다.
- **보안 강화:** `self hosted` 통합 설정 메뉴가 제거되었습니다. `/embed` 커맨드를 활용하여 안전한 임베딩 플로우를 구축하십시오.

### 2-3. 문서 렌더링 및 API 계약 변경 (v0.77.0, v1.1.0)

- **Mentions 직렬화 변경 (v1.1.0):** 문서 내에서 사용자, 컬렉션 등을 멘션하는 노드가 더 이상 특수 타입이 아닌 **일반 링크 형태**로 직렬화됩니다. API 응답을 파싱하여 멘션 노드를 처리하던 코드는 이 변경을 반영해야 합니다.
- **문서 렌더링 검증 (v0.77.0):** 커스텀 테마나 외부 파이프라인에서 Outline 문서를 렌더링하는 경우, 테이블 편집 플로우 개선으로 인해 **DOM 구조가 변경**되었을 수 있습니다. 회귀 테스트를 수행하여 테이블 및 코멘트 렌더링이 깨지지 않는지 확인하십시오.
- **API 유연성:** `comments.list` 엔드포인트는 이제 document ID 없이도 호출 가능합니다. 클라이언트 측에서 코멘트 조회 로직의 유연성을 높이십시오.

---

## 3. Strategic Adoption: 도입해야 할 신규 패턴

- **Git/Linear 인라인 멘션 (v0.84.0):** GitHub 이슈/PR 및 Linear 이슈 링크를 문서에 붙이면 상태가 반영되는 리치 멘션으로 자동 변환됩니다. 기술 문서와 외부 트래커 간의 실시간 동기화를 구축하십시오.
- **API 키 만료 관리 (v0.78.0):** API 키에 만료일, `lastUsed` 시점 등이 추가되었습니다. 서버 사이드에서 이 정보를 활용하여 사용되지 않는 키를 자동으로 정리하는 **키 수명주기 관리 배치**를 구현하십시오.

---

## 4. Conclusion

Outline v1.0.0의 핵심은 **안정화된 문서 파이프라인**과 **OAuth 기반의 강력한 인증 모델**입니다. **Node 18+ 및 Postgres 확장 설치**를 통해 인프라를 현대화하고, **OAuth Provider 기능**을 활용하여 외부 서비스와의 통합 보안 수준을 높이는 것이 이번 업그레이드의 핵심 전략입니다.
