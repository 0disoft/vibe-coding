# 바이브 코딩 요청 및 작업 추적 (REQUESTS)

이 문서는 이용자가 에이전트(LLM)에게 요청한 다양한 작업 사항과 그 진행 상태를 한눈에 파악하기 위한 마스터 보드입니다.

---

## 요청 유형 가이드

- **코드 개선 제안**: 특정 파일의 품질, 성능, 접근성 리뷰 요청
- **기능 구현**: 새로운 기능이나 컴포넌트 추가 요청
- **버그 수정**: 발견된 이슈 해결 요청
- **구조 개선**: 프로젝트 아키텍처나 설정 환경 변경 요청
- **문서화**: 기술 문서 작성이나 README 업데이트 요청

## 상태 아이콘 가이드

- ⏳ **대기**: 요청이 접수되었으나 아직 작업 전
- 🏗️ **진행 중**: 에이전트가 현재 작업 중
- ✅ **완료**: 작업이 완료되고 이용자에게 보고됨
- ❌ **중단/보류**: 기술적 제약이나 우선순위 조정으로 중단됨

## 판단 아이콘 가이드 (LEAD_ENGINEER)

- ✅ **반영**: 즉시 구현
- ⏭️ **무시**: 구현하지 않음
- ⏸️ **보류**: 나중에 검토
- ❓ **확인 필요**: 추가 정보 필요
- 🔵 **확인됨**: 이미 구현됨
- 🔄 **부분 반영**: 일부만 채택
- ⚠️ **위험**: 구현 가능하나 리스크 존재
- 🔀 **대안 제시**: 다른 방식으로 해결
- 📝 **문서화**: 코드가 아닌 문서로 해결

---

## 요청 내역 및 상태

| 순번 | 요청 유형 | 대상 파일/항목 | 상태 | 비고 |
| :--- | :--- | :--- | :--- | :--- |
| 1 | 코드 개선 제안 | `src/lib/components/docs` | ✅ 완료 | [상세 보기](#1-docs-컴포넌트-모음-리팩토링) |
| 2 | 코드 개선 제안 | `src/lib/components/design-system/AccordionItem.svelte` | ✅ 완료 | [상세 보기](#2-accordionitem-리팩토링) |
| 3 | 코드 개선 제안 | `src/lib/interaction/SmoothScroll.svelte` | 🏗️ 진행 중 | [상세 보기](#3-smoothscroll-리팩토링) |
| 4 | 코드 개선 제안 | `src/lib/i18n/messages.test.ts` | 🏗️ 진행 중 | [상세 보기](#4-messagestestts-리팩토링) |
| 5 | 코드 개선 제안 | `src/lib/components/Header.svelte` | 🏗️ 진행 중 | [상세 보기](#5-header-리팩토링) |
| 6 | 코드 개선 제안 | `src/lib/components/CodeBlock.svelte` | 🏗️ 진행 중 | [상세 보기](#6-codeblock-리팩토링) |
| 7 | 코드 개선 제안 | `src/lib/components/header-actions/UserMenu.svelte` | 🏗️ 진행 중 | [상세 보기](#7-usermenu-리팩토링) |
| 8 | 코드 개선 제안 | `src/lib/components/header-actions/ThemeToggle.svelte` | 🏗️ 진행 중 | [상세 보기](#8-themetoggle-리팩토링) |
| 9 | 코드 개선 제안 | `src/lib/components/header-actions/LanguagePicker.svelte` | 🏗️ 진행 중 | [상세 보기](#9-languagepicker-리팩토링) |
| 10 | 코드 개선 제안 | `src/lib/components/header-actions/FontSizePicker.svelte` | 🏗️ 진행 중 | [상세 보기](#10-fontsizepicker-리팩토링) |
| 11 | 코드 개선 제안 | `src/lib/components/footer-actions/FooterMenu.svelte` | 🏗️ 진행 중 | [상세 보기](#11-footermenu-리팩토링) |

---

## 📋 작업 상세 내용

### 1. Docs 컴포넌트 모음 리팩토링

- **대상**: `src/lib/components/docs` (전체 파일)
- **관점**: `A11Y_UX_COPILOT` (문서화 시스템의 일관성 및 접근성)
- **제안 내용**:
  - **다국어 지원(i18n) 강화**: `ApiEndpointCard`, `DocsLayout`, `DocsToc`, `DocsSidebarNav` 등 여러 컴포넌트에 하드코딩된 문자열("Docs", "On this page", "Results", "Copy link" 등)을 Paraglide 메시지(`m.*`)로 전환하여 글로벌 서비스 대응 능력을 확보합니다.
  - **Svelte 5 Runes 최적화**:
    - `DocsAnchoredHeading`의 `headingTag()`와 같은 로직을 `$derived` 룬으로 전환하여 선언적 성능을 높입니다.
    - `ApiEndpointCard`에서 `$effect` 기반의 `activeExampleIndex` 보정 로직을 `$derived` 또는 더 안정적인 상태 관리 패턴으로 개선합니다.
  - **접근성(A11y) 보강**:
    - **ID 일관성**: `DocsLayout`의 `docs-sidebar`, `docs-toc` 등 하드코딩된 ID를 `$props.id()`를 사용해 자동 생성하거나 병합하여 중복 및 충돌을 방지합니다.
    - **스크린 리더 피드백**: `DocsAnchoredHeading`의 링크 복사 시 `DsLiveRegion`을 사용하는 것은 우수합니다. `ApiEndpointCard`의 예제 변경 시에도 스크린 리더가 인지할 수 있도록 `aria-live`를 검토합니다.
    - **포커스 가시성**: `DocsAnchoredHeading`의 앵커 링크가 호버/포커스 시에만 보이는 디자인은 키보드 사용자에게 유용하지만, 저시력 사용자를 위해 가시성을 상시 확보하거나 명확한 포커스 링 스타일을 보장합니다.
  - **레이아웃 안정성 및 성능**:
    - `DocsLayout`의 `embedded` 모드와 일반 모드 간의 전환 시 발생하는 미디어 쿼리 로직을 `SOLVED.md`의 레거시 API 이슈를 고려하여 현대적인 `addEventListener` 전용으로 정리합니다.
    - 모바일 시트(`DsSheet`)와 일반 사이드바 간의 중복 렌더링을 최소화하고, `inert` 속성 등을 활용해 배경 포커스 트랩을 더 견고히 합니다.
  - **데이터 구조 일관성**: `DocsToc`과 `DocsLayout`에서 사용하는 `TocItem` 등의 타입을 배럴 파일(`index.ts`)에서 통합 관리하여 타입 안정성을 높입니다.
- **처리 결과**:
  - ✅ **다국어 지원(i18n) 강화**: Docs 컴포넌트의 문자열을 `m.*`로 전환하고 `messages/*.json`에 docs 전용 키를 추가했습니다.
  - ✅ **Svelte 5 Runes 최적화**: `DocsAnchoredHeading`의 heading tag를 `$derived`로 전환하고, `ApiEndpointCard`는 파생 인덱스로 범위를 안정화했습니다.
  - ✅ **ID 일관성**: `DocsLayout`에서 `$props.id()` 기반으로 `docs-sidebar`/`docs-toc`/루트 ID를 생성했습니다.
  - ✅ **스크린 리더 피드백**: `ApiEndpointCard`에 `DsLiveRegion`을 추가해 예제 변경을 공지합니다.
  - ✅ **포커스 가시성**: 앵커 링크에 `group-focus-within` 가시성 보강을 추가했습니다.
  - 🔵 **미디어 쿼리 로직 정리**: `addEventListener` 기반으로 이미 구현되어 있어 추가 수정 없이 확인만 했습니다.
  - ⏭️ **중복 렌더링/inert**: `DsSheet`의 포커스 트랩과 `hidden` 클래스가 충분하다고 판단해 변경하지 않았습니다.
  - ✅ **데이터 구조 일관성**: `TocItem` 타입을 `types.ts`로 분리하고 배럴에서 재노출했습니다.

---

### 2. AccordionItem 리팩토링

- **대상**: `src/lib/components/design-system/AccordionItem.svelte`
- **관점**: `A11Y_UX_COPILOT` (아코디언 항목의 유연성 및 구조적 정합성)
- **제안 내용**:
  - **다형성 지원 (Semantic Tagging)**: 루트 요소가 `div`로 고정되어 있습니다. 아코디언이 리스트(`ul` > `li`) 구조로 사용되어야 하는 경우를 위해 `as` 프로퍼티가 `li` 등으로 변경할 수 있는 옵션을 제공합니다.
  - **상태 기반 스타일링 강화**: `data-state` 외에도 `data-open`, `data-disabled` 등을 활용하여 CSS에서 가상 클래스 등을 사용하지 않고도 직관적으로 스타일링할 수 있도록 속성 설계를 보강합니다.
  - **ID 충돌 방지 및 검증**: `value`가 ID 생성에 사용되므로, 유효하지 않은 문자열이 들어왔을 때의 폴백 로직이 `accordion-ids.ts`에 충분한지 검토하고, 컴포넌트 레벨에서도 최소한의 안전장치를 확인합니다.
  - **시각적 강조 정책**: 항목이 열렸을 때의 테두리나 배경색 변화를 위한 CSS 변수 매핑이 디자인 시스템의 다른 카드형 컴포넌트와 일관성을 유지하는지 점검합니다.
- **처리 결과**:
  - ✅ **다형성 지원**: `as`로 `div`/`li` 루트 태그를 선택할 수 있도록 했습니다.
  - ✅ **상태 기반 스타일링**: `data-open` 속성을 추가해 CSS 훅을 강화했습니다.
  - 🔵 **ID 충돌 방지**: 기존 `accordion-ids` 정책을 유지합니다.
  - 🔵 **시각적 강조 정책**: 기존 토큰/스타일을 유지했습니다.

---

### 3. SmoothScroll 리팩토링

- **대상**: `src/lib/interaction/SmoothScroll.svelte`
- **관점**: `A11Y_UX_COPILOT` (부드러운 스크롤의 접근성 및 초점 동기화)
- **제안 내용**:
  - **초점 이동 자동화 (A11y)**: 시각적 스크롤 이동 후 타깃 요소로 실제 키보드 초점(Focus)을 동기화하여 접근성 위반 방지.
  - **URL 및 히스토리 관리**: 브라우저 내비게이션(뒤로/앞으로 가기) 시에도 부드러운 스크롤이 자연스럽게 연동되도록 보강.
  - **구성 옵션 확장 (UX/DX)**: `lerp`, `easing` 등 상세 설정을 Props로 노출하여 유연한 사용성 확보.
  - **키보드 오버라이드 정밀화**: 특정 복합 컴포넌트와의 키 간섭 방지를 위한 예외 처리 강화.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 4. messages.test.ts 리팩토링

- **대상**: `src/lib/i18n/messages.test.ts`
- **관점**: `A11Y_UX_COPILOT` (다국어 메시지 품질 및 접근성 검증 체계)
- **제안 내용**:
  - **번역 품질 자동 검증 (UX)**: 단순히 키의 존재 여부만 체크하는 것을 넘어, 빈 문자열이나 "JSON Key"와 동일한 값이 할당된 경우(번역 누락 의심 사례)를 감지하는 테스트 케이스를 추가합니다.
  - **접근성 전용 키 명명 규칙 준수**: 디자인 시스템에서 권장하는 접근성 키(예: `*_aria_label`, `*_sr_only`)가 모든 언어 파일에서 일관되게 정의되었는지 검증하는 로직을 보강합니다.
  - **플레이스홀더 누락 방지 강화**: 복잡한 ICU 메시지 포맷이나 중첩된 플레이스홀더 패턴이 모든 번역 파일에서 깨지지 않고 정확히 유지되는지 정규표현식을 고도화하여 체크합니다.
  - **문자열 길이 임계치 경고 (UX)**: 버튼이나 탭처럼 공간 제약이 심한 UI에 들어가는 메시지의 경우, 특정 언어(예: 독일어, 러시아어 등)에서 지나치게 길어져 레이아웃이 붕괴될 가능성이 있는 키들을 목록화하여 관리하고, 경고(Warning)를 띄우는 메커니즘을 검토합니다.
  - **방향성(RTL) 마커 무결성**: 아랍어 등 RTL 언어 파일에서 특정 제어 문자나 방향성 플레이스홀더가 의도치 않게 삭제되거나 위치가 바뀌지 않았는지 검증합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 5. Header 리팩토링

- **대상**: `src/lib/components/Header.svelte`
- **관점**: `A11Y_UX_COPILOT` (내비게이션 구조 및 모바일 경험)
- **제안 내용**:
  - **랜드마크 및 레이블 최적화 (A11y)**: 데스크톱/모바일 내비게이션 목적 구분을 위한 레이블 정교화 및 로고 링크 접근성 보강.
  - **모바일 메뉴 UX**: `DsSheet`와의 연동을 통한 포커스 트랩 강화 및 배경 `inert` 처리, 메뉴 닫힘 시 시각적 피드백 개선.
  - **상태 기반 시각적 단서 (UX)**: 활성 링크에 대한 색상 대비 점검 및 색상 외 시각적 단서(Bold, Underline 등) 추가 검토.
  - **코드 구조 개선 (DX)**: 네비게이션 렌더링 로직을 `Snippet`으로 공통화하여 중복 제거 및 유지보수성 향상.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 6. CodeBlock 리팩토링

- **대상**: `src/lib/components/CodeBlock.svelte`
- **관점**: `A11Y_UX_COPILOT` (코드 가독성 및 글로벌 접근성)
- **제안 내용**:
  - **다국어 지원(i18n) 강화 (UX)**: "Copy code", "Copied to clipboard" 등 사용자에게 직접 노출되는 하드코딩된 문자열을 Paraglide 메시지로 전환하여 언어별 일관성을 확보합니다.
  - **초점(Focus) 가시성 보강 (A11y)**: 코드 본문 영역(`tabindex="0"`)에 키보드 포커스가 진입했을 때, 디자인 시스템의 포커스 링 스타일을 적용하여 현재 위치를 명확히 인지할 수 있도록 개선합니다.
  - **로딩 상태 인지 보조**: 하이라이팅 로딩 중(`aria-busy="true"`) 시각적 정보뿐만 아니라 스크린 리더 사용자에게 현재 상태를 안내하는 레이블링을 보강합니다.
  - **긴 콘텐츠 대응 (UX)**: 코드 블록이 지나치게 길 경우 가독성을 저해할 수 있으므로, 최대 높이(`max-height`) 설정 및 "전체 보기" 토글 기능 도입을 검토합니다.
  - **구조적 시맨틱 검토**: 현재 `role="textbox"`를 통해 라인별 탐색을 돕는 방식은 우수하나, 일반적인 코드 블록의 시맨틱(`code` 태그 내의 텍스트)과의 정합성을 재점검합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 7. UserMenu 리팩토링

- **대상**: `src/lib/components/header-actions/UserMenu.svelte`
- **관점**: `A11Y_UX_COPILOT` (사용자 개인정보 보호 및 메뉴 접근성)
- **제안 내용**:
  - **다국어 지원(i18n) 완성**: 이메일 보기/숨기기 버튼의 레이블(`이메일 보기`, `이메일 숨기기`)이 한국어로 하드코딩되어 있습니다. 이를 Paraglide 메시지(`m.*`)로 전환하여 글로벌 대응 능력을 확보합니다.
  - **상태 변경 피드백 강화 (A11y)**: 이메일 마스킹 상태가 해제되거나 적용될 때, 시각적으로는 즉시 반영되지만 스크린 리더 사용자에게는 명확한 안내가 부족할 수 있습니다. `aria-live="polite"`를 활용하거나, 레이블 변경 시 문맥을 충분히 설명하도록 개선합니다.
  - **키보드 접근성 정교화**: 드롭다운 내부에 일반적인 `menuitem`이 아닌 토글 버튼(이메일 보기)이 포함되어 있습니다. `itemSelector`가 이 버튼을 건너뛰지 않고 키보드 탐색(화살표 키)으로 자연스럽게 접근 가능한지 확인하고 보강합니다.
  - **개인정보 보호 로직 모듈화 (DX)**: 현재 내부에 정의된 `maskEmail` 함수를 공통 유틸리티(`$lib/shared/utils/privacy.ts` 등)로 분리하여 프로젝트 전반에서 일관된 마스킹 정책을 적용할 수 있도록 합니다.
  - **로딩 및 인증 상태 통합**: Better-Auth 연동을 대비하여, 인증 정보 로딩 중의 상태(`Skeleton` 등)를 스니펫으로 미리 정의하여 UX 안정성을 높입니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 8. ThemeToggle 리팩토링

- **대상**: `src/lib/components/header-actions/ThemeToggle.svelte`
- **관점**: `A11Y_UX_COPILOT` (테마 전환의 접근성 및 상태 피드백)
- **제안 내용**:
  - **스크린 리더 상태 안내 (A11y)**: 테마 모드나 팔레트가 변경될 때, 시각적 변화뿐만 아니라 스크린 리더 사용자에게 "다크 모드로 변경됨", "에어리 블루 팔레트 적용됨"과 같은 명확한 피드백을 제공하도록 개선합니다. `aria-live` 영역을 활용하거나 적절한 상태 메시지 안내 메커니즘을 검토합니다.
  - **모션 감수성 대응 (UX)**: 테마 전환 시 발생하는 시각적 트랜지션 효과가 사용자의 OS 설정(`prefers-reduced-motion: reduce`)을 존중하도록 보강합니다. 애니메이션 시간을 0으로 설정하거나 전환 효과를 생략하여 사용자 불편을 최소화합니다.
  - **초기 상태 동기화 및 안정성**: SSR에서 주입된 테마 설정과 클라이언트 사이드 스토어 상태 간의 동기화 로직을 점검하여, 페이지 로드 시 발생하는 깜빡임(FOUC)을 방지하고 일관된 테마 경험을 보장합니다.
  - **인터랙션 레이블 정교화**: `DsThemeControlCenter`에 전달되는 `label`이 현재의 컨텍스트(테마 및 팔레트 통합 제어)를 충분히 설명하는지 검토하고, 필요한 경우 접근성 레이블을 더욱 명확하게 보강합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 9. LanguagePicker 리팩토링

- **대상**: `src/lib/components/header-actions/LanguagePicker.svelte`
- **관점**: `A11Y_UX_COPILOT` (언어 전환의 직관성 및 내비게이션 접근성)
- **제안 내용**:
  - **현재 로케일 강조 및 인지 (UX)**: `DsLocaleSwitcher` 내에서 현재 선택된 언어가 시각적으로뿐만 아니라 보조 공학 기기에서 `aria-current="true"` 등을 통해 명확히 강조되도록 보강합니다.
  - **페이지 전환 피드백 (A11y)**: 언어 변경 시 페이지가 리로드되거나 내비게이션이 발생할 때, 스크린 리더 사용자에게 "언어가 한국어로 변경되었습니다"와 같은 음성 안내를 즉시 제공하는 기능을 검토합니다.
  - **검색 및 필터링 사용성**: 언어 목록이 많아질 경우를 대비하여 `DsLocaleSwitcher`의 `showSearch` 옵션을 상황에 맞게 제어하고, 검색 결과가 없을 때의 접근성 레이블(`emptyText`)이 적절히 제공되는지 점검합니다.
  - **RTL 언어 환경의 레이아웃 안정성**: 아랍어 등 RTL 언어로 전환했을 때 언어 선택기 UI의 정렬 방향과 아이콘 배치가 디자인 시스템의 논리적 속성 토큰을 따르는지 확인합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 10. FontSizePicker 리팩토링

- **대상**: `src/lib/components/header-actions/FontSizePicker.svelte`
- **관점**: `A11Y_UX_COPILOT` (사용자 맞춤형 글꼴 제어의 접근성 및 피드백)
- **제안 내용**:
  - **의미론적 레이블링 보강 (A11y)**: 현재 1~9 사이의 숫자로만 표시된 각 크기 단계에 대해, 스크린 리더가 "글꼴 크기 단계 1", "글꼴 크기 단계 2"와 같이 명확한 맥락을 읽어줄 수 있도록 `aria-label`을 Paraglide 메시지로 추가합니다.
  - **동적 상태 안내 (A11y)**: 글꼴 크기가 변경되면 전체 레이아웃의 비율이 달라지므로, 변경 직후 스크린 리더 사용자에게 "글꼴 크기가 5단계로 설정되었습니다"와 같은 음성 안내(`aria-live` 또는 `DsLiveRegion` 활용)를 제공하여 변화를 인지시킵니다.
  - **그리드 그룹 레이블링**: 3x3 그리드로 구성된 라디오 그룹 영역에 대해 `aria-labelledby`를 사용하여 현재 "글꼴 크기 선택" 중임을 명확히 안내합니다.
  - **비파괴적 미리보기 (UX)**: 사용자가 여러 크기를 시도해 본 후 최적의 설정을 찾을 수 있도록, 항목 클릭 시 메뉴가 즉시 닫히지 않고 "적용" 버튼을 누르거나 메뉴를 닫을 때 확정되는 방식, 혹은 호버 시 미리보기를 제공하는 방안을 검토합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)

---

### 11. FooterMenu 리팩토링

- **대상**: `src/lib/components/footer-actions/FooterMenu.svelte`
- **관점**: `A11Y_UX_COPILOT` (하단 보조 내비게이션의 접근성 및 구조적 명확성)
- **제안 내용**:
  - **시맨틱 역할(Role) 보정 (A11y)**: 현재 `role="menuitemradio"`를 사용하고 있으나, 푸터 메뉴는 상태 선택보다는 페이지 이동이 주 목적인 내비게이션 링크 집합이므로 일반적인 `role="menuitem"`으로 변경하거나, 현재 위치 강조를 위해 `aria-current="page"`를 사용하도록 보강합니다.
  - **반응형 가시성 및 공백 관리 (UX)**: `mobileOnly` 항목들이 숨겨질 때(`sm:!hidden`) 드롭다운 내부의 아이템 간격(Gap)이나 구분선(Separator)이 깨지지 않고 시각적으로 자연스럽게 유지되도록 레이아웃 로직을 정교화합니다.
  - **아이콘 접근성**: 장식용으로 사용된 각 메뉴의 아이콘에 `aria-hidden="true"`를 명시하여 스크린 리더가 중복된 정보를 읽지 않도록 방어합니다.
  - **중첩 내비게이션 정책**: 데스크톱의 고정 푸터 링크와 모바일 드롭다운 메뉴 간의 데이터 일관성을 유지하면서도, 스크린 리더 사용자가 중복된 내비게이션 랜드마크를 마주하지 않도록 `aria-label`을 통한 맥락 구분을 명확히 합니다.
- **처리 결과**:
  - 🏗️ **진행 중**: 분석 및 개선 제안 완료. (구현 대기)
