theme.svelte.ts

전체적인 방향

쿠키를 직접 읽고 쓰면서

data-theme를 html 루트에 세팅하는 구조라서

템플릿 입장에서는 “어디서나 가져다 쓰기 쉬운 전역 테마 매니저” 느낌이라 좋음.

좋은 점

서버에서 이미 data-theme을 심어줬으면 그 값을 그대로 신뢰하고 DOM을 다시 건드리지 않음
이게 깜빡임 줄이는 핵심 포인트.

쿠키 없으면 시스템 다크 모드 선호도를 보고 초기값을 정함.

생각해볼 수 있는 개선 포인트

SameSite와 Secure 옵션

현재는 SameSite=Lax만 들어가 있고, Secure는 빠져 있음.

템플릿 차원에서 “https 쓸 게 확실한 프로젝트들이다”라는 전제가 있다면

document.cookie =
  name +
  "=" +
  (value || "") +
  expires +
  "; path=/; SameSite=Lax; Secure";


이런 식으로 올려두는 것도 고려해볼 만함.