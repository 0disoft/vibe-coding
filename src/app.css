/* Pretendard + JetBrains Mono (로컬 호스팅) */
@import 'pretendard/dist/web/variable/pretendardvariable.css';
@import '@fontsource-variable/jetbrains-mono';

:root {
  color-scheme: light dark;

  /* Font stacks */
  /* 기본(비한국어) 환경은 시스템 폰트 우선 */
  --font-sans: -apple-system, BlinkMacSystemFont, system-ui, "Segoe UI", Roboto, "Helvetica Neue",
    sans-serif;
  --font-mono: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;

  /* Font scale (1~9). 0.05 간격: 1=1.05 … 5=1.25(기본) … 9=1.45 */
  --fs-scale: 1;
  font-size: calc(17px * var(--fs-scale));

  /* Base font sizes */
  --fs-body-base: 1.35rem;
  --fs-body-secondary-base: 1.2rem;
  --fs-comment-base: 1.25rem;
  --fs-code-base: 0.75rem;
  --fs-h1-base: 2.2rem;
  --fs-h2-base: 1.8rem;
  --fs-h3-base: 1.5rem;
  --fs-caption-base: 1.0rem;

  /* Computed font tokens */
  --fs-body: var(--fs-body-base);
  --fs-body-secondary: var(--fs-body-secondary-base);
  --fs-comment: var(--fs-comment-base);
  --fs-code: var(--fs-code-base);
  --fs-h1: var(--fs-h1-base);
  --fs-h2: var(--fs-h2-base);
  --fs-h3: var(--fs-h3-base);
  --fs-caption: var(--fs-caption-base);

  /* Line heights */
  --lh-body: 1.6;
  --lh-heading: 1.3;

  /* gleam.run inspired light palette */
  --background: 98.2% 0.008 102;
  --foreground: 35% 0.04 331;

  /* 카드, 팝오버, 포커스 영역 등 */
  --card: 96.0% 0.02 102;
  --code-card: 95.0% 0.02 102;
  --code-card-foreground: 35% 0.04 331;
  --card-foreground: 35% 0.04 331;

  --popover: 97.4% 0.02 102;
  --popover-foreground: 35% 0.04 331;

  /* 주요 액션 */
  --primary: 94% 0.1265 332;
  --primary-foreground: 19% 0.015 332;

  /* 보조 액션 / 서브 버튼 */
  --secondary: 92% 0.0746 209;
  --secondary-foreground: 20% 0.02 209;

  /* 강조 요소 (배지, 토글 등) */
  --accent: 94% 0.03 97;
  --accent-foreground: 24% 0.02 97;

  /* 링크 */
  --link: 66% 0.12 209;
  --link-foreground: 20% 0.02 209;

  /* 약한 텍스트, 서브 카드 배경 등 */
  --muted: 93% 0.01 106;
  --muted-foreground: 45% 0.02 106;

  /* 파괴적 액션 (삭제 등) - 파스텔 톤 */
  --destructive: 85% 0.10 25;
  --destructive-foreground: 18% 0.02 260;

  /* 성공 / 경고 상태 - 파스텔 톤 */
  --success: 90% 0.09 150;
  --success-foreground: 18% 0.02 150;

  --warning: 95% 0.07 95;
  --warning-foreground: 20% 0.03 95;

  /* 경계 / 입력 / 포커스 링 */
  --border: 92% 0.008 106;
  --input: 93% 0.008 106;
  --ring: 85.14% 0.1265 332;

  /* 네비게이션/오버레이 */
  --sidebar: 97% 0.012 106;
  --sidebar-foreground: 32% 0.025 331;
  --overlay: 24% 0.015 274;
}

/* 한국어(lang=ko, ko-KR 등) 문맥에서만 Pretendard를 적용 */
:lang(ko),
html:lang(ko),
html:lang(ko-KR),
body:lang(ko),
body:lang(ko-KR) {
  --font-sans: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui,
    "Segoe UI", Roboto, "Helvetica Neue", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic",
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

:root[data-font-size='1'] {
  --fs-scale: 1.05;
}

:root[data-font-size='2'] {
  --fs-scale: 1.10;
}

:root[data-font-size='3'] {
  --fs-scale: 1.15;
}

:root[data-font-size='4'] {
  --fs-scale: 1.20;
}

:root[data-font-size='5'] {
  --fs-scale: 1.25;
}

:root[data-font-size='6'] {
  --fs-scale: 1.30;
}

:root[data-font-size='7'] {
  --fs-scale: 1.35;
}

:root[data-font-size='8'] {
  --fs-scale: 1.40;
}

:root[data-font-size='9'] {
  --fs-scale: 1.45;
}

:root[data-theme='dark'] {
  color-scheme: dark;

  /* gleam.run inspired dark palette */
  --background: 30.09% 0.0314 274;
  --foreground: 96% 0.01 106;

  --card: 33% 0.0314 274;
  --code-card: 27% 0.0314 274;
  --code-card-foreground: 96% 0.01 106;
  --card-foreground: 96% 0.01 106;

  --popover: 35% 0.0314 274;
  --popover-foreground: 96% 0.01 106;

  /* 주요 액션 */
  --primary: 86% 0.1265 332;
  --primary-foreground: 14% 0.02 332;

  /* 보조 액션 / 서브 버튼 */
  --secondary: 88% 0.0746 209;
  --secondary-foreground: 14% 0.02 209;

  /* 강조 요소 (배지, 토글, hover 등) */
  --accent: 45% 0.04 274;
  --accent-foreground: 94% 0.01 97;

  /* 링크 */
  --link: 78% 0.12 209;
  --link-foreground: 94% 0.01 209;

  /* 약한 텍스트, 서브 카드 배경, hover 등 */
  --muted: 42% 0.02 274;
  --muted-foreground: 88% 0.015 106;

  /* 파괴적 액션 (삭제 등) */
  --destructive: 88% 0.10 25;
  --destructive-foreground: 14% 0.02 25;

  /* 성공 / 경고 상태 */
  --success: 82% 0.09 150;
  --success-foreground: 14% 0.02 150;

  --warning: 86% 0.07 95;
  --warning-foreground: 14% 0.02 95;

  /* 경계 / 입력 / 포커스 링 */
  --border: 36% 0.012 274;
  --input: 38% 0.012 274;
  --ring: 82% 0.1265 332;

  /* 네비게이션/오버레이 */
  --sidebar: 26% 0.015 274;
  --sidebar-foreground: 90% 0.01 106;
  --overlay: 10% 0.01 274;
}

body {
  background-color: oklch(var(--background));
  color: oklch(var(--foreground));
  font-size: var(--fs-body);
  line-height: var(--lh-body);
  font-family: var(--font-sans);
  /* 폰트 렌더링 최적화 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1 {
  font-size: var(--fs-h1);
  line-height: var(--lh-heading);
}

h2 {
  font-size: var(--fs-h2);
  line-height: var(--lh-heading);
}

h3 {
  font-size: var(--fs-h3);
  line-height: var(--lh-heading);
}

p {
  font-size: var(--fs-body);
  line-height: var(--lh-body);
}

small,
.text-caption {
  font-size: var(--fs-caption);
}

code,
pre {
  font-size: var(--fs-code);
  line-height: 1.5;
  font-family: var(--font-mono);
}

pre {
  background-color: oklch(var(--card));
  border: none;
  border-radius: 0.75rem;
  padding: 1rem;
  overflow-x: auto;
}

.code-card {
  background-color: oklch(var(--code-card));
  color: oklch(var(--code-card-foreground));
}

.code-card pre,
.code-card pre code,
.code-card code.hljs,
.code-card pre.hljs {
  background-color: oklch(var(--code-card));
  color: oklch(var(--code-card-foreground));
  border: none;
}

/* 중첩 code 요소가 줄 단위로 박스가 나뉘는 현상 방지 */
pre code {
  display: block;
  padding: 0;
  background: transparent;
  border: none;
}

/* Syntax highlighting (highlight.js) */
pre.hljs,
code.hljs {
  background-color: oklch(var(--code-card));
  color: oklch(var(--code-card-foreground));
}

.hljs-comment,
.hljs-quote {
  color: oklch(55% 0.02 106);
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name,
.hljs-strong {
  color: oklch(50% 0.18 330);
  /* 진한 마젠타/핑크 */
  font-weight: 700;
}

.hljs-string,
.hljs-attr,
.hljs-symbol {
  color: oklch(55% 0.15 150);
  /* 진한 초록 - 문자열 */
}

.hljs-built_in,
.hljs-type {
  color: oklch(50% 0.12 200);
  /* 진한 청록/시안 - 타입 (string, number 등) */
}

.hljs-number,
.hljs-attribute,
.hljs-template-variable,
.hljs-variable {
  color: oklch(65% 0.15 55);
  /* 진한 주황 */
}

.hljs-title,
.hljs-title.class_,
.hljs-title.function,
.hljs-function {
  color: oklch(55% 0.12 250);
  /* 진한 보라/파랑 - 함수명 */
}

.hljs-meta,
.hljs-link {
  color: oklch(var(--link));
}

.hljs-emphasis {
  font-style: italic;
}

/* 다크모드 highlight.js 색상 오버라이드 */
:root[data-theme='dark'] .hljs-keyword,
:root[data-theme='dark'] .hljs-selector-tag,
:root[data-theme='dark'] .hljs-literal,
:root[data-theme='dark'] .hljs-name,
:root[data-theme='dark'] .hljs-strong {
  color: oklch(75% 0.18 330);
  /* 밝은 마젠타/핑크 */
}

:root[data-theme='dark'] .hljs-comment,
:root[data-theme='dark'] .hljs-quote {
  color: oklch(70% 0.02 106);
}

:root[data-theme='dark'] .hljs-string,
:root[data-theme='dark'] .hljs-attr,
:root[data-theme='dark'] .hljs-symbol {
  color: oklch(75% 0.15 150);
  /* 밝은 초록 - 문자열 */
}

:root[data-theme='dark'] .hljs-built_in,
:root[data-theme='dark'] .hljs-type {
  color: oklch(75% 0.12 200);
  /* 밝은 청록/시안 - 타입 */
}

:root[data-theme='dark'] .hljs-number,
:root[data-theme='dark'] .hljs-attribute,
:root[data-theme='dark'] .hljs-template-variable,
:root[data-theme='dark'] .hljs-variable {
  color: oklch(78% 0.15 55);
  /* 밝은 주황 */
}

:root[data-theme='dark'] .hljs-title,
:root[data-theme='dark'] .hljs-title.class_,
:root[data-theme='dark'] .hljs-title.function,
:root[data-theme='dark'] .hljs-function {
  color: oklch(75% 0.12 250);
  /* 밝은 보라/파랑 */
}