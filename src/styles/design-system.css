/* ═══════════════════════════════════════════════════════════════════════════
   Design System (Global)
   - 이 파일은 토큰을 소비하는 전역 유틸/컴포넌트/패턴 스타일만 포함합니다.
   - 토큰 선언은 src/styles/design-system.tokens.css (generated)에서 관리합니다.
   ═══════════════════════════════════════════════════════════════════════════ */

.ds-focus-ring:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 var(--focus-ring-offset) oklch(var(--focus-ring-offset-color)),
    0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) oklch(var(--focus-ring-color));
}

@media (forced-colors: active) {

  .ds-focus-ring:focus-visible {
    box-shadow: none;
    outline: var(--focus-ring-width) solid Highlight;
    outline-offset: var(--focus-ring-offset);
  }
}

.ds-motion {
  transition:
    transform var(--motion-duration-fast) var(--motion-ease),
    opacity var(--motion-duration-fast) var(--motion-ease);
}

.ds-motion:hover {
  transform: translateY(-2px);
}

@media (prefers-reduced-motion: reduce) {

  .ds-motion {
    transition: opacity var(--motion-duration-fast) var(--motion-ease);
  }

  .ds-motion:hover {
    transform: none;
    opacity: 0.9;
  }
}

.ds-touch-target {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
}

/* ───────────────────────────────────────────────────────────
   Component: DsButton
   - 상태 스토리(hover/focus/active)는 data-ds-state로 고정 표시 가능
   ─────────────────────────────────────────────────────────── */

.ds-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  padding: var(--button-padding-y-md) var(--button-padding-x-md);
  font-size: var(--font-size-btn);
  line-height: 1.4;
  font-weight: 600;

  border-width: 1px;
  border-style: solid;
  border-radius: var(--button-radius);

  transition:
    background-color var(--motion-duration-fast) var(--motion-ease),
    color var(--motion-duration-fast) var(--motion-ease),
    border-color var(--motion-duration-fast) var(--motion-ease),
    box-shadow var(--motion-duration-fast) var(--motion-ease);
}

.ds-button[data-ds-size="sm"] {
  padding: var(--button-padding-y-sm) var(--button-padding-x-sm);
  font-size: var(--font-size-btn-sm);
}

.ds-button[data-ds-size="lg"] {
  padding: var(--button-padding-y-lg) var(--button-padding-x-lg);
  font-size: var(--font-size-btn-lg);
}

.ds-button[data-ds-intent="primary"] {
  --ds-btn-bg: var(--color-primary);
  --ds-btn-bg-hover: var(--color-primary-hover);
  --ds-btn-fg: var(--color-on-primary);
  --ds-btn-border: var(--color-primary);
  --ds-btn-text: var(--color-primary);
  --ds-btn-hover-alpha: 1;
  --ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-intent="neutral"] {
  --ds-btn-bg: var(--color-surface);
  --ds-btn-bg-hover: var(--color-surface-hover);
  --ds-btn-fg: var(--color-text);
  --ds-btn-border: var(--color-border);
  --ds-btn-text: var(--color-text);
  --ds-btn-hover-alpha: 1;
  --ds-btn-active-alpha: 1;
}

.ds-button[data-ds-intent="secondary"] {
  --ds-btn-bg: var(--color-secondary);
  --ds-btn-bg-hover: var(--color-secondary);
  --ds-btn-fg: var(--color-on-secondary);
  --ds-btn-border: var(--color-border);
  --ds-btn-text: var(--color-text);
  --ds-btn-hover-alpha: 0.92;
  --ds-btn-active-alpha: 0.85;
}

.ds-button[data-ds-intent="success"] {
  --ds-btn-bg: var(--color-success);
  --ds-btn-bg-hover: var(--color-success);
  --ds-btn-fg: var(--color-on-success);
  --ds-btn-border: var(--color-success);
  --ds-btn-text: var(--color-success);
  --ds-btn-hover-alpha: 0.92;
  --ds-btn-active-alpha: 0.85;
}

.ds-button[data-ds-intent="warning"] {
  --ds-btn-bg: var(--color-warning);
  --ds-btn-bg-hover: var(--color-warning);
  --ds-btn-fg: var(--color-on-warning);
  --ds-btn-border: var(--color-warning);
  --ds-btn-text: var(--color-warning);
  --ds-btn-hover-alpha: 0.92;
  --ds-btn-active-alpha: 0.85;
}

.ds-button[data-ds-intent="error"] {
  --ds-btn-bg: var(--color-error);
  --ds-btn-bg-hover: var(--color-error);
  --ds-btn-fg: var(--color-on-error);
  --ds-btn-border: var(--color-error);
  --ds-btn-text: var(--color-error);
  --ds-btn-hover-alpha: 0.92;
  --ds-btn-active-alpha: 0.85;
}

.ds-button[data-ds-variant="solid"] {
  background-color: oklch(var(--ds-btn-bg));
  color: oklch(var(--ds-btn-fg));
  border-color: transparent;
}

.ds-button[data-ds-variant="solid"]:is(:hover, [data-ds-state="hover"]) {
  background-color: oklch(var(--ds-btn-bg-hover, var(--ds-btn-bg)) / var(--ds-btn-hover-alpha, 1));
}

.ds-button[data-ds-variant="solid"]:is(:active, [data-ds-state="active"]) {
  background-color: oklch(var(--ds-btn-bg-hover, var(--ds-btn-bg)) / var(--ds-btn-active-alpha, 0.9));
}

.ds-button[data-ds-variant="outline"] {
  background-color: transparent;
  color: oklch(var(--ds-btn-text));
  border-color: oklch(var(--ds-btn-border));
}

.ds-button[data-ds-variant="outline"]:is(:hover, [data-ds-state="hover"]) {
  background-color: oklch(var(--ds-btn-bg) / 0.12);
}

.ds-button[data-ds-variant="outline"]:is(:active, [data-ds-state="active"]) {
  background-color: oklch(var(--ds-btn-bg) / 0.18);
}

.ds-button[data-ds-variant="ghost"] {
  background-color: transparent;
  color: oklch(var(--ds-btn-text));
  border-color: transparent;
}

.ds-button[data-ds-variant="ghost"]:is(:hover, [data-ds-state="hover"]) {
  background-color: oklch(var(--ds-btn-bg) / 0.12);
}

.ds-button[data-ds-variant="ghost"]:is(:active, [data-ds-state="active"]) {
  background-color: oklch(var(--ds-btn-bg) / 0.18);
}

.ds-button[data-ds-variant="link"] {
  background-color: transparent;
  color: oklch(var(--color-link));
  border-color: transparent;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.ds-button[data-ds-variant="link"]:is(:hover, [data-ds-state="hover"]) {
  color: oklch(var(--color-link) / 0.9);
}

.ds-button[data-ds-state="focus"] {
  outline: none;
  box-shadow:
    0 0 0 var(--focus-ring-offset) oklch(var(--focus-ring-offset-color)),
    0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) oklch(var(--focus-ring-color));
}

/* ───────────────────────────────────────────────────────────
   Pattern: Field
   ─────────────────────────────────────────────────────────── */

.ds-field {
  display: grid;
  gap: var(--field-gap);
}

.ds-field-label {
  color: oklch(var(--field-label-color));
  font-size: var(--font-size-label);
  line-height: 1.4;
  font-weight: 600;
}

.ds-field-help {
  color: oklch(var(--field-help-color));
  font-size: var(--font-size-helper);
  line-height: 1.4;
}

.ds-field-error {
  color: oklch(var(--field-error-color));
  font-size: var(--font-size-helper);
  line-height: 1.4;
}

/* ───────────────────────────────────────────────────────────
   Pattern: Dialog
   ─────────────────────────────────────────────────────────── */

.ds-dialog {
  border: none;
  padding: 0;
  background: transparent;
  color: inherit;
}

.ds-dialog::backdrop {
  background: var(--color-scrim);
}

.ds-dialog-surface {
  background: oklch(var(--dialog-surface));
  border: var(--border-width) solid oklch(var(--dialog-border));
  border-radius: var(--dialog-radius);
  box-shadow: var(--dialog-shadow);
  padding: var(--dialog-padding);
  /* 기본 너비는 md 사이즈 기준 */
  width: min(600px, calc(100vw - (var(--spacing-4) * 2)));
}

/* Dialog Sizes */
.ds-dialog[data-ds-size="sm"] .ds-dialog-surface {
  width: min(400px, calc(100vw - (var(--spacing-4) * 2)));
}

.ds-dialog[data-ds-size="md"] .ds-dialog-surface {
  width: min(600px, calc(100vw - (var(--spacing-4) * 2)));
}

.ds-dialog[data-ds-size="lg"] .ds-dialog-surface {
  width: min(800px, calc(100vw - (var(--spacing-4) * 2)));
}

.ds-dialog[data-ds-size="xl"] .ds-dialog-surface {
  width: min(1000px, calc(100vw - (var(--spacing-4) * 2)));
}

.ds-dialog[data-ds-size="full"] .ds-dialog-surface {
  width: calc(100vw - (var(--spacing-4) * 2));
  height: calc(100vh - (var(--spacing-4) * 2));
}

.ds-dialog-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--dialog-gap);
}

.ds-dialog-body {
  margin-top: var(--spacing-4);
}

.ds-dialog-footer {
  margin-top: var(--spacing-4);
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-2);
}

/* ───────────────────────────────────────────────────────────
   Utilities: Elevation
   ─────────────────────────────────────────────────────────── */

.ds-elevation-1 {
  box-shadow: var(--elevation-1);
}

.ds-elevation-2 {
  box-shadow: var(--elevation-2);
}

.ds-elevation-3 {
  box-shadow: var(--elevation-3);
}

/* ───────────────────────────────────────────────────────────
   Pattern: Dropdown
   ─────────────────────────────────────────────────────────── */

.ds-dropdown {
  position: relative;
  display: inline-block;
}

.ds-dropdown-menu {
  position: absolute;
  top: calc(100% + var(--spacing-2));
  inset-inline-start: auto;
  inset-inline-end: 0;
  min-width: 220px;
  background: oklch(var(--dropdown-surface));
  border: var(--border-width) solid oklch(var(--dropdown-border));
  border-radius: var(--dropdown-radius);
  padding: var(--dropdown-padding-y) var(--dropdown-padding-x);
  z-index: var(--z-dropdown);
  display: grid;
  gap: var(--spacing-1);
}

.ds-dropdown-item {
  text-align: start;
  padding: var(--dropdown-item-padding-y) var(--dropdown-item-padding-x);
  border-radius: var(--radius-sm);
  border: none;
  background: transparent;
  color: oklch(var(--color-text));
  cursor: pointer;
}

.ds-dropdown-item:hover:not(:disabled) {
  background: oklch(var(--dropdown-item-hover));
}

.ds-dropdown-item:disabled,
.ds-dropdown-item[data-disabled="true"] {
  cursor: not-allowed;
  opacity: var(--opacity-disabled);
}

/* ───────────────────────────────────────────────────────────
   Pattern: Tooltip
   ─────────────────────────────────────────────────────────── */

.ds-tooltip-root {
  position: relative;
  display: inline-flex;
  align-items: center;
}

.ds-tooltip {
  position: absolute;
  width: auto;
  min-width: min(280px, calc(100vw - 2rem));
  max-width: min(var(--tooltip-max-width), calc(100vw - 2rem));
  padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
  border-radius: var(--tooltip-radius);
  background: oklch(var(--tooltip-surface));
  color: oklch(var(--tooltip-text));
  font-family: var(--font-family-base);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
  pointer-events: none;
  white-space: normal;
  word-break: keep-all;
  overflow-wrap: break-word;
  text-wrap: pretty;
  z-index: var(--z-tooltip);

  --tooltip-arrow-size: var(--tooltip-arrow-size);
}

/* Placement: Top */
.ds-tooltip[data-placement^="top"] {
  bottom: calc(100% + var(--tooltip-offset));
}
.ds-tooltip[data-placement="top"] { left: 50%; }
.ds-tooltip[data-placement="top-start"] { left: 0; }
.ds-tooltip[data-placement="top-end"] { right: 0; }

/* Placement: Bottom */
.ds-tooltip[data-placement^="bottom"] {
  top: calc(100% + var(--tooltip-offset));
}
.ds-tooltip[data-placement="bottom"] { left: 50%; }
.ds-tooltip[data-placement="bottom-start"] { left: 0; }
.ds-tooltip[data-placement="bottom-end"] { right: 0; }

/* Placement: Left */
.ds-tooltip[data-placement^="left"] {
  right: calc(100% + var(--tooltip-offset));
}
.ds-tooltip[data-placement="left"] { top: 50%; }
.ds-tooltip[data-placement="left-start"] { top: 0; }
.ds-tooltip[data-placement="left-end"] { bottom: 0; }

/* Placement: Right */
.ds-tooltip[data-placement^="right"] {
  left: calc(100% + var(--tooltip-offset));
}
.ds-tooltip[data-placement="right"] { top: 50%; }
.ds-tooltip[data-placement="right-start"] { top: 0; }
.ds-tooltip[data-placement="right-end"] { bottom: 0; }

/* Arrow */
.ds-tooltip[data-arrow="true"]::after {
  content: "";
  position: absolute;
  width: var(--tooltip-arrow-size);
  height: var(--tooltip-arrow-size);
  background: oklch(var(--tooltip-surface));
  transform: rotate(45deg);
}

/* Arrow Positioning */
.ds-tooltip[data-placement^="top"][data-arrow="true"]::after {
  top: calc(100% - (var(--tooltip-arrow-size) / 2));
}
.ds-tooltip[data-placement="top"][data-arrow="true"]::after { left: 50%; margin-left: calc(var(--tooltip-arrow-size) / -2); }
.ds-tooltip[data-placement="top-start"][data-arrow="true"]::after { left: var(--spacing-4); }
.ds-tooltip[data-placement="top-end"][data-arrow="true"]::after { right: var(--spacing-4); }

.ds-tooltip[data-placement^="bottom"][data-arrow="true"]::after {
  bottom: calc(100% - (var(--tooltip-arrow-size) / 2));
}
.ds-tooltip[data-placement="bottom"][data-arrow="true"]::after { left: 50%; margin-left: calc(var(--tooltip-arrow-size) / -2); }
.ds-tooltip[data-placement="bottom-start"][data-arrow="true"]::after { left: var(--spacing-4); }
.ds-tooltip[data-placement="bottom-end"][data-arrow="true"]::after { right: var(--spacing-4); }

.ds-tooltip[data-placement^="left"][data-arrow="true"]::after {
  left: calc(100% - (var(--tooltip-arrow-size) / 2));
}
.ds-tooltip[data-placement="left"][data-arrow="true"]::after { top: 50%; margin-top: calc(var(--tooltip-arrow-size) / -2); }
.ds-tooltip[data-placement="left-start"][data-arrow="true"]::after { top: var(--spacing-2); }
.ds-tooltip[data-placement="left-end"][data-arrow="true"]::after { bottom: var(--spacing-2); }

.ds-tooltip[data-placement^="right"][data-arrow="true"]::after {
  right: calc(100% - (var(--tooltip-arrow-size) / 2));
}
.ds-tooltip[data-placement="right"][data-arrow="true"]::after { top: 50%; margin-top: calc(var(--tooltip-arrow-size) / -2); }
.ds-tooltip[data-placement="right-start"][data-arrow="true"]::after { top: var(--spacing-2); }
.ds-tooltip[data-placement="right-end"][data-arrow="true"]::after { bottom: var(--spacing-2); }

/* ───────────────────────────────────────────────────────────
   Pattern: Card
   ─────────────────────────────────────────────────────────── */

.ds-card {
  display: flex;
  flex-direction: column;
  border-radius: var(--card-radius, var(--radius-md));
  overflow: hidden;
  background: oklch(var(--card-bg));
  color: oklch(var(--card-fg));
}

/* Variants */
.ds-card[data-ds-variant="outline"] {
  background: oklch(var(--color-surface));
  border: var(--border-width) solid oklch(var(--color-border));
  --card-bg: var(--color-surface);
  --card-fg: var(--color-text);
}

.ds-card[data-ds-variant="filled"] {
  /* TODO: 다크모드 대응을 위한 시맨틱 토큰(muted 등)으로 교체 권장 */
  background: oklch(var(--color-neutral-100));
  border: none;
  --card-bg: var(--color-neutral-100);
  --card-fg: var(--color-text);
}

.ds-card[data-ds-variant="elevated"] {
  background: oklch(var(--color-surface));
  border: none;
  box-shadow: var(--elevation-1);
  --card-bg: var(--color-surface);
  --card-fg: var(--color-text);
}

.ds-card[data-ds-variant="ghost"] {
  background: transparent;
  border: none;
  --card-bg: transparent;
  --card-fg: var(--color-text);
}

/* Padding Sizes */
.ds-card[data-ds-padding="none"] { --card-padding: var(--card-padding-none, 0); }
.ds-card[data-ds-padding="sm"] { --card-padding: var(--card-padding-sm, var(--spacing-3)); }
.ds-card[data-ds-padding="md"] { --card-padding: var(--card-padding-md, var(--spacing-4)); }
.ds-card[data-ds-padding="lg"] { --card-padding: var(--card-padding-lg, var(--spacing-6)); }

/* Child Layout */
.ds-card-header {
  padding: var(--card-padding);
  padding-bottom: 0;
}

.ds-card-body {
  padding: var(--card-padding);
  flex: 1;
}

.ds-card-footer {
  padding: var(--card-padding);
  padding-top: 0;
}

/* ───────────────────────────────────────────────────────────
   Pattern: Toast
   ─────────────────────────────────────────────────────────── */

.ds-toast-region {
  position: fixed;
  z-index: var(--z-toast, 100);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
  padding: var(--spacing-4);
  width: 100%;
  max-width: 400px;
  pointer-events: none;
}

.ds-toast-region > * {
  pointer-events: auto;
}

/* Positions */
.ds-toast-region[data-ds-position="top-right"] {
  top: 0;
  right: 0;
}

.ds-toast-region[data-ds-position="top-left"] {
  top: 0;
  left: 0;
}

.ds-toast-region[data-ds-position="bottom-right"] {
  bottom: 0;
  right: 0;
  flex-direction: column-reverse;
}

.ds-toast-region[data-ds-position="bottom-left"] {
  bottom: 0;
  left: 0;
  flex-direction: column-reverse;
}

.ds-toast-region[data-ds-position="top-center"] {
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  align-items: center;
}

.ds-toast-region[data-ds-position="bottom-center"] {
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  flex-direction: column-reverse;
  align-items: center;
}

/* Toast Item */
.ds-toast {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-3);
  padding: var(--spacing-3);
  border-radius: var(--radius-md);
  background: oklch(var(--color-surface));
  color: oklch(var(--color-text));
  border: var(--border-width) solid oklch(var(--color-border));
  width: 100%;
}

.ds-toast-icon {
  flex-shrink: 0;
  color: oklch(var(--color-text-muted));
}

.ds-toast[data-intent="success"] .ds-toast-icon { color: oklch(var(--color-success)); }
.ds-toast[data-intent="warning"] .ds-toast-icon { color: oklch(var(--color-warning)); }
.ds-toast[data-intent="error"] .ds-toast-icon { color: oklch(var(--color-error)); }

