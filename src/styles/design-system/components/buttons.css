/* ───────────────────────────────────────────────────────────
   Component: DsButton
   - 상태 스토리(hover/focus/active)는 data-ds-state로 고정 표시 가능
   ─────────────────────────────────────────────────────────── */

.ds-button {
	--ds-button-icon-size: var(--size-icon-md);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 0.5rem;

	padding: var(--button-padding-y-md) var(--button-padding-x-md);
	font-size: var(--font-size-btn);
	line-height: 1.4;
	font-weight: 600;

	border-width: 1px;
	border-style: solid;
	border-radius: var(--button-radius);

	transition:
		background-color var(--motion-duration-fast) var(--motion-ease),
		color var(--motion-duration-fast) var(--motion-ease),
		border-color var(--motion-duration-fast) var(--motion-ease),
		box-shadow var(--motion-duration-fast) var(--motion-ease),
		opacity var(--motion-duration-fast) var(--motion-ease);
}

.ds-button:disabled,
.ds-button[aria-busy="true"],
.ds-button[aria-disabled="true"] {
	cursor: not-allowed;
	opacity: var(--opacity-disabled);
	pointer-events: none;
}

.ds-button[data-ds-size="sm"] {
	--ds-button-icon-size: var(--size-icon-sm);
	padding: var(--button-padding-y-sm) var(--button-padding-x-sm);
	font-size: var(--font-size-btn-sm);
}

.ds-button[data-ds-size="xs"] {
	--ds-button-icon-size: var(--size-icon-xs);
}

.ds-button[data-ds-size="lg"] {
	--ds-button-icon-size: var(--size-icon-lg);
	padding: var(--button-padding-y-lg) var(--button-padding-x-lg);
	font-size: var(--font-size-btn-lg);
}

.ds-button__loader {
	width: var(--ds-button-icon-size);
	height: var(--ds-button-icon-size);
}

.ds-link-button__loader {
	width: var(--size-icon-sm);
	height: var(--size-icon-sm);
}

.ds-button[data-ds-size="lg"] .ds-link-button__loader {
	width: var(--size-icon-md);
	height: var(--size-icon-md);
}

.ds-button[data-ds-intent="primary"] {
	--ds-btn-bg: var(--color-primary);
	--ds-btn-bg-hover: var(--color-primary-hover);
	--ds-btn-fg: var(--color-on-primary);
	--ds-btn-border: var(--color-primary);
	--ds-btn-text: var(--color-primary);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-intent="neutral"] {
	--ds-btn-bg: var(--color-surface);
	--ds-btn-bg-hover: var(--color-surface-hover);
	--ds-btn-fg: var(--color-text);
	--ds-btn-border: var(--color-border);
	--ds-btn-text: var(--color-text);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 1;
}

.ds-button[data-ds-intent="secondary"] {
	--ds-btn-bg: var(--color-secondary);
	--ds-btn-bg-hover: var(--color-secondary-hover);
	--ds-btn-fg: var(--color-on-secondary);
	--ds-btn-border: var(--color-border);
	--ds-btn-text: var(--color-text);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-intent="success"] {
	--ds-btn-bg: var(--color-success);
	--ds-btn-bg-hover: var(--color-success-hover);
	--ds-btn-fg: var(--color-on-success);
	--ds-btn-border: var(--color-success);
	--ds-btn-text: var(--color-success);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-intent="warning"] {
	--ds-btn-bg: var(--color-warning);
	--ds-btn-bg-hover: var(--color-warning-hover);
	--ds-btn-fg: var(--color-on-warning);
	--ds-btn-border: var(--color-warning);
	--ds-btn-text: var(--color-warning);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-intent="error"] {
	--ds-btn-bg: var(--color-error);
	--ds-btn-bg-hover: var(--color-error-hover);
	--ds-btn-fg: var(--color-on-error);
	--ds-btn-border: var(--color-error);
	--ds-btn-text: var(--color-error);
	--ds-btn-hover-alpha: 1;
	--ds-btn-active-alpha: 0.92;
}

.ds-button[data-ds-variant="solid"] {
	background-color: oklch(var(--ds-btn-bg));
	color: oklch(var(--ds-btn-fg));
	border-color: transparent;
}

.ds-button[data-ds-variant="solid"]:is(:hover, [data-ds-state="hover"]) {
	background-color: oklch(var(--ds-btn-bg-hover, var(--ds-btn-bg)) / var(--ds-btn-hover-alpha, 1));
}

.ds-button[data-ds-variant="solid"]:is(:active, [data-ds-state="active"]) {
	background-color: oklch(var(--ds-btn-bg-hover, var(--ds-btn-bg)) / var(--ds-btn-active-alpha, 0.9));
}

.ds-button[data-ds-variant="outline"] {
	background-color: transparent;
	color: oklch(var(--ds-btn-text));
	border-color: oklch(var(--ds-btn-border));
}

.ds-button[data-ds-variant="outline"]:is(:hover, [data-ds-state="hover"]) {
	background-color: oklch(var(--ds-btn-bg) / 0.12);
}

.ds-button[data-ds-variant="outline"]:is(:active, [data-ds-state="active"]) {
	background-color: oklch(var(--ds-btn-bg) / 0.18);
}

.ds-button[data-ds-variant="ghost"] {
	background-color: transparent;
	color: oklch(var(--ds-btn-text));
	border-color: transparent;
}

.ds-button[data-ds-variant="ghost"]:is(:hover, [data-ds-state="hover"]) {
	background-color: oklch(var(--ds-btn-bg) / 0.12);
}

.ds-button[data-ds-variant="ghost"]:is(:active, [data-ds-state="active"]) {
	background-color: oklch(var(--ds-btn-bg) / 0.18);
}

.ds-button[data-ds-variant="link"] {
	background-color: transparent;
	color: oklch(var(--color-link));
	border-color: transparent;
	text-decoration: underline;
	text-underline-offset: 2px;
}

.ds-button[data-ds-variant="link"]:is(:hover, [data-ds-state="hover"]) {
	color: oklch(var(--color-link) / 0.9);
}

.ds-button[data-ds-state="focus"] {
	outline: none;
	box-shadow:
		inset 0 0 0 var(--focus-ring-width) oklch(var(--focus-ring-color)),
		0 0 0 var(--focus-ring-offset) oklch(var(--focus-ring-offset-color));
}

@media (forced-colors: active) {
	.ds-button,
	.ds-icon-button {
		forced-color-adjust: none;
		background-color: ButtonFace;
		border-color: ButtonText;
		color: ButtonText;
	}

	.ds-button[data-ds-variant="ghost"],
	.ds-button[data-ds-variant="link"],
	.ds-icon-button[data-ds-variant="ghost"] {
		background-color: transparent;
	}

	.ds-button[data-ds-variant="solid"],
	.ds-icon-button[data-ds-variant="solid"] {
		background-color: Highlight;
		border-color: Highlight;
		color: HighlightText;
	}

	.ds-button:disabled,
	.ds-icon-button:disabled,
	.ds-button[aria-disabled="true"],
	.ds-icon-button[aria-disabled="true"] {
		background-color: ButtonFace;
		border-color: GrayText;
		color: GrayText;
		opacity: 1;
	}
}

/* ───────────────────────────────────────────────────────────
   Component: DsIconButton
   ─────────────────────────────────────────────────────────── */

.ds-icon-button {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: var(--button-radius);
	border-width: 1px;
	border-style: solid;
	border-color: transparent;
	cursor: pointer;
	transition:
		background-color var(--motion-duration-fast) var(--motion-ease),
		color var(--motion-duration-fast) var(--motion-ease),
		border-color var(--motion-duration-fast) var(--motion-ease);
	flex-shrink: 0;
	padding: 0;
	inline-size: var(--btn-size);
	block-size: var(--btn-size);
	color: oklch(var(--ds-btn-text));
}

@media (pointer: coarse) {
	.ds-icon-button {
		min-inline-size: var(--touch-target-min);
		min-block-size: var(--touch-target-min);
	}
}

/* Size Tokens */
.ds-icon-button[data-ds-size="xs"] {
	--btn-size: 1.5rem;
	font-size: var(--size-icon-xs);
}

.ds-icon-button[data-ds-size="sm"] {
	--btn-size: 2rem;
	font-size: var(--size-icon-sm);
}

.ds-icon-button[data-ds-size="md"] {
	--btn-size: 2.5rem;
	font-size: var(--size-icon-md);
}

.ds-icon-button[data-ds-size="lg"] {
	--btn-size: 3rem;
	font-size: var(--size-icon-lg);
}

/* Intents (Button과 동일한 변수 재사용) */
.ds-icon-button[data-ds-intent="neutral"] {
	--ds-btn-text: var(--color-text);
	--ds-btn-bg-hover: var(--color-surface-hover);
}

.ds-icon-button[data-ds-intent="primary"] {
	--ds-btn-text: var(--color-primary);
	--ds-btn-bg: var(--color-primary);
	--ds-btn-fg: var(--color-on-primary);
}

.ds-icon-button[data-ds-intent="secondary"] {
	--ds-btn-text: var(--color-text);
	--ds-btn-bg-hover: var(--color-secondary);
}

.ds-icon-button[data-ds-intent="success"] {
	--ds-btn-text: var(--color-success);
}

.ds-icon-button[data-ds-intent="warning"] {
	--ds-btn-text: var(--color-warning);
}

.ds-icon-button[data-ds-intent="error"] {
	--ds-btn-text: var(--color-error);
	--ds-btn-bg: var(--color-error);
	--ds-btn-fg: var(--color-on-error);
}



/* Typography */
/* Ghost */
.ds-icon-button[data-ds-variant="ghost"] {
	background-color: transparent;
	border-color: transparent;
}

.ds-icon-button[data-ds-variant="ghost"]:hover:not(:disabled) {
	background-color: oklch(var(--ds-btn-bg-hover, var(--color-surface-hover)));
}

.ds-icon-button[data-ds-variant="ghost"][aria-pressed="true"] {
	background-color: oklch(var(--ds-btn-bg-hover, var(--color-surface-hover)));
	color: oklch(var(--color-primary));
}

/* Outline */
.ds-icon-button[data-ds-variant="outline"] {
	background-color: transparent;
	border-color: oklch(var(--color-border));
}

.ds-icon-button[data-ds-variant="outline"]:hover:not(:disabled) {
	background-color: oklch(var(--color-surface-hover));
}

/* Solid */
.ds-icon-button[data-ds-variant="solid"] {
	background-color: oklch(var(--ds-btn-bg));
	color: oklch(var(--ds-btn-fg));
}

.ds-icon-button[data-ds-variant="solid"]:hover:not(:disabled) {
	opacity: 0.9;
}

.ds-icon-button:disabled {
	cursor: not-allowed;
	opacity: var(--opacity-disabled);
}
