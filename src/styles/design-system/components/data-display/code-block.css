/* ───────────────────────────────────────────────────────────
   Component: Code Block (Shiki)
   ─────────────────────────────────────────────────────────── */

.ds-code-block-shell {
	background-color: oklch(var(--color-code-card));
	color: oklch(var(--color-on-code-card));
	font-family: var(--font-family-mono);
	font-size: var(--font-size-code);
	line-height: 1.5;
	border-radius: var(--radius-md);
	border: var(--border-width) solid oklch(var(--color-border));
	position: relative;
	overflow: visible;
}

.ds-code-block-copy {
	display: inline-flex;
	align-items: center;
}

.ds-code-block-header {
	position: sticky;
	inset-block-start: 0;
	display: flex;
	align-items: center;
	gap: var(--spacing-2);
	padding: var(--spacing-3) var(--spacing-4) var(--spacing-2);
	background-color: oklch(var(--color-code-card));
	z-index: 1;
	border-start-start-radius: var(--radius-md);
	border-start-end-radius: var(--radius-md);
}

.ds-code-block-badge {
	display: inline-flex;
	align-items: center;
	gap: var(--spacing-1);
	padding: var(--spacing-1) var(--spacing-2);
	font-size: var(--font-size-caption);
	font-weight: 600;
	border-radius: var(--radius-sm);
	border: var(--border-width) solid oklch(var(--color-border));
	background-color: oklch(var(--color-surface) / 0.8);
	color: oklch(var(--color-text));
	backdrop-filter: blur(4px);
}

.ds-code-block-content {
	overflow: auto;
	max-height: var(--code-block-max-height, 32rem);
	scrollbar-width: thin;
	scrollbar-color: oklch(var(--color-border)) transparent;
	border-end-start-radius: var(--radius-md);
	border-end-end-radius: var(--radius-md);
}

.ds-code-block-content--highlighted {
	animation: ds-code-block-fade-in 140ms ease-out;
}

.ds-code-block-content::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

.ds-code-block-content::-webkit-scrollbar-thumb {
	background-color: oklch(var(--color-border));
	border-radius: 999px;
}

.ds-code-block-content::-webkit-scrollbar-track {
	background-color: transparent;
}

@keyframes ds-code-block-fade-in {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@media (prefers-reduced-motion: reduce) {
	.ds-code-block-content--highlighted {
		animation: none;
	}
}

