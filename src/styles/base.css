/* Global Reset */
*,
::before,
::after {
	box-sizing: border-box;
}

body {
	background-color: oklch(var(--color-background));
	color: oklch(var(--color-text));
	font-size: var(--font-size-body);
	line-height: var(--line-height-body);
	font-family: var(--font-family-base);

	/* 폰트 렌더링 최적화 */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;

	/* 모바일 폰트 부스팅(강제 확대) 방지 */
	-webkit-text-size-adjust: none;
	text-size-adjust: none;

	/* 렌더링/가독성 최적화 */
	text-rendering: optimizeLegibility;
	font-synthesis: none;
	font-optical-sizing: auto;
	font-kerning: normal;
	font-variant-ligatures: common-ligatures contextual;

	/* 고아(orphan) 방지: 마지막 줄에 글자 하나만 남는 현상 완화 */
	text-wrap: pretty;

	/* 밑줄(링크 등) 가독성 */
	text-decoration-skip-ink: auto;
	text-underline-position: under;
	text-underline-offset: 0.15em;
	text-decoration-thickness: 1px;
}

a {
	text-decoration: none;
}

/*
  접근성: 프로그램적으로 포커스를 받는 컨테이너(tabindex="-1")는
  포커스 링을 숨깁니다. (예: 페이지 이동 후 main 태그)
*/
[tabindex="-1"]:focus {
	outline: none !important;
}

h1,
h2,
h3 {
	/* 제목 줄바꿈 균형 맞추기 */
	text-wrap: balance;
}

h1 {
	font-size: var(--font-size-h1);
	line-height: var(--line-height-heading);
}

h2 {
	font-size: var(--font-size-h2);
	line-height: var(--line-height-heading);
}

h3 {
	font-size: var(--font-size-h3);
	line-height: var(--line-height-heading);
}

h4 {
	font-size: var(--font-size-h4);
	line-height: var(--line-height-heading);
	text-wrap: balance;
}

p {
	font-size: var(--font-size-body);
	line-height: var(--line-height-body);
}

small,
.text-caption {
	font-size: var(--font-size-caption);
}

code,
pre {
	font-size: var(--font-size-code);
	line-height: 1.5;
	font-family: var(--font-family-mono);

	/* 코드 가독성: 합자 끄기, 0에 사선 긋기, 숫자 등폭 */
	font-variant-ligatures: none;
	font-variant-numeric: tabular-nums slashed-zero;
}

/* Shiki 코드블록: 기본값(태블릿+) - 가로 스크롤 */
pre.shiki {
	max-width: 100%;
	overflow-x: auto;
	white-space: pre;
}

/* 모바일에서만 줄바꿈 */
@media (max-width: 767px) {

	pre.shiki,
	pre.shiki code,
	pre.shiki span {
		white-space: pre-wrap !important;
		/* 공백/구두점에서만 줄바꿈, 단어 중간 끊김 방지 */
		word-break: normal !important;
		overflow-wrap: anywhere !important;
		hyphens: none !important;
	}

	pre.shiki {
		overflow-x: visible;
	}
}

@media (prefers-reduced-motion: reduce) {

	html:focus-within {
		scroll-behavior: auto;
	}

	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

@media (prefers-reduced-transparency: reduce) {

	.backdrop-blur,
	.backdrop-blur-sm,
	.backdrop-blur-md,
	.backdrop-blur-lg {
		backdrop-filter: none !important;
	}
}

/* Shiki 외 일반 코드블록 */
pre:not(.shiki) {
	background-color: oklch(var(--color-surface));
	border: none;
	border-radius: 0.75rem;
	padding: 1rem;
	overflow-x: auto;
}

/* Legacy: 기존 마크업 호환(새 코드는 ds-code-block 사용) */
.code-card {
	background-color: oklch(var(--color-code-card));
	color: oklch(var(--color-on-code-card));
}

.code-card pre,
.code-card pre code {
	background-color: oklch(var(--color-code-card));
	color: oklch(var(--color-on-code-card));
	border: none;
}

/* 중첩 code 요소가 줄 단위로 박스가 나뉘는 현상 방지 */
pre code {
	display: block;
	padding: 0;
	background: transparent;
	border: none;
}
